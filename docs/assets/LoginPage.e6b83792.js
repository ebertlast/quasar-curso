import{Q as w,e as p,f as C,g as O}from"./use-quasar.c059fe33.js";import{u as V,r as u,o as S,aC as c,w as $,c as y,k as Q,l as I,m as f,n as v,f as t,Q as g,b1 as N}from"./index.b48f70d8.js";import{Q as R}from"./QPage.7733aa18.js";import{u as q}from"./vue-i18n.runtime.esm-bundler.72047ea2.js";import"./format.e98013f3.js";const F={class:"q-pa-md bg-white",style:{width:"400px"}},k={__name:"LoginPage",setup(L){const o=V(),s=u(null),n=u("OSOLANO"),r=u("OMAR2020");u(!1);const i=O(),m=N(),d=u([]),{t:b}=q(),h=()=>{i.loading.show({message:"Consultando los datos del usuario..."}),c.post("ususu/ingresar",{COMPANIA:s.value.COMPANIA,USUARIO:n.value,CLAVE:r.value}).then(e=>{const l=e.data.jwt,a=e.data.result;l?(o.setJwt(l),o.setUsuario(a),m.push({name:"home"})):i.notify({color:"negative",textColor:"white",icon:"error",message:b("form.login.credenciales_incorrectas"),progress:!0,actions:[{icon:"close",color:"white"}]})}).finally(()=>{i.loading.hide()})},A=()=>{n.value="",r.value=""};return S(()=>{o.jwt&&m.push({name:"home"}),c.get("cia/").then(e=>{d.value=e.data.result.recordset}).then(()=>{o.companiaFavorita&&(s.value=o.companiaFavorita)})}),$(()=>s.value,e=>{o.setCompaniaFavorita(e)}),y(()=>o.companiaFavorita?o.companiaFavorita.RAZONSOCIAL:"Sin Compania Seleccionada").value,(e,l)=>(Q(),I(R,{padding:"",class:"bg-indigo-1 flex flex-center"},{default:f(()=>[v("div",F,[t(C,{onSubmit:h,onReset:A,class:"q-gutter-md"},{default:f(()=>[t(w,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=a=>s.value=a),options:d.value,label:e.$t("form.login.compania_label"),"option-label":"RAZONSOCIAL","option-value":"COMPANIA",filled:""},null,8,["modelValue","options","label"]),t(p,{filled:"",modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=a=>n.value=a),label:e.$t("form.login.usuario_label"),hint:e.$t("form.login.usuario_hint"),"lazy-rules":"",rules:[a=>a&&a.length>0||e.$t("form.required.text")]},null,8,["modelValue","label","hint","rules"]),t(p,{type:"password",filled:"",modelValue:r.value,"onUpdate:modelValue":l[2]||(l[2]=a=>r.value=a),label:e.$t("form.login.clave_label"),hint:e.$t("form.login.clave_hint"),"lazy-rules":"",rules:[a=>a&&a.length>0||e.$t("form.required.text")]},null,8,["modelValue","label","hint","rules"]),v("div",null,[t(g,{label:e.$t("form.buttons.submit"),type:"submit",color:"primary",disable:n.value===""||r.value===""},null,8,["label","disable"]),t(g,{label:e.$t("form.buttons.reset"),type:"reset",color:"primary",flat:"",class:"q-ml-sm"},null,8,["label"])])]),_:1})])]),_:1}))}};export{k as default};
